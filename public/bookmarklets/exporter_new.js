(function(){var a=new Date,f=[a.getFullYear(),("0"+(a.getMonth()+1)).slice(-2),("0"+a.getDate()).slice(-2),"_",("0"+a.getHours()).slice(-2),("0"+a.getMinutes()).slice(-2),("0"+a.getSeconds()).slice(-2)].join(""),h=["Personal/basicInfo","TcBook/info","CharacterList/info","Event/info"];if(window.location.href.match(/^https:\/\/kancolle-arcade.net\/ac\/#\/(area|list|pictureBook)/)){var d=(a=document.getElementById("admiral-stats-exporter"))&&a.getAttribute("data-token");d&&0===d.length&&(d=nil);var k=a&&"true"===a.getAttribute("data-skip-backup");h.forEach(function(a){var g=a.replace("/","_"),c=new XMLHttpRequest,l=g+"_"+f+".json";c.open("GET","https://kancolle-arcade.net/ac/api/"+a);c.setRequestHeader("X-Requested-With","XMLHttpRequest");c.responseType="blob";c.onload=function(){if(200===c.status){if(d){var b=new XMLHttpRequest;b.open("POST","https://www.admiral-stats.com/api/v1/import/"+g+"/"+f);b.setRequestHeader("Content-Type","application/json");b.setRequestHeader("Authorization","Bearer "+d);b.send()}if(!k)if(b=new Blob([c.response]),window.navigator.msSaveBlob)window.navigator.msSaveBlob(b,l);else{var b=(window.URL||window.webkitURL).createObjectURL(b),e=document.createElement("a");document.body.appendChild(e);e.download=g+"_"+f+".json";e.href=b;e.click();document.body.removeChild(e)}}else a===h[0]&&alert("Admiral Stats \u30a8\u30af\u30b9\u30dd\u30fc\u30bf v1.6.1\uff1a\u63a5\u7d9a\u306b\u5931\u6557\u3057\u307e\u3057\u305f\u3002\u30d7\u30ec\u30a4\u30e4\u30fc\u30ba\u30b5\u30a4\u30c8\u306b\u518d\u30ed\u30b0\u30a4\u30f3\u3057\u3066\u304b\u3089\u5b9f\u884c\u3057\u3066\u304f\u3060\u3055\u3044\u3002(status code = "+c.status+")")};c.send()})}else alert("Admiral Stats \u30a8\u30af\u30b9\u30dd\u30fc\u30bf v1.6.1\uff1a\u30d7\u30ec\u30a4\u30e4\u30fc\u30ba\u30b5\u30a4\u30c8\u306b\u30ed\u30b0\u30a4\u30f3\u3057\u3001\u6d77\u57df\u60c5\u5831\u304c\u8868\u793a\u3055\u308c\u305f\u72b6\u614b\u3067\u5b9f\u884c\u3057\u3066\u304f\u3060\u3055\u3044\u3002")})();
